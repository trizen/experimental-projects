#!/usr/bin/ruby

# Numbers that are both k-gonal and (k+1)-gonal for some k >= 3.
# https://oeis.org/A378245

# Known terms:
#   1, 36, 1225, 9801, 40755, 41616, 121771, 297045, 631125, 1212751, 1413721


# The sequence also includes (with possible gaps): 2158695, 3617601, 5773825, 8851275, 13117251, 18886285, 26523981, 36450855, 48024900, 49146175, 65151801, 94109401, 1533776805, 1631432881, 12625478965, 55420693056, 69010153345, 286703855361, 903638458801, 977965238701.

var arr = []

for n in (2..50000) {
    for k in (3..20) {
        var t = polygonal(n, k)
        arr[k] := Set() << t
        #break if (t > 1e20)
    }
}

arr.each_kv {|k,v|
    for t in (v) {
        if (defined(arr[k+1]) && arr[k+1].has(t)) {
            say [k, t]
        }
    }
}

__END__
[3, 1225]
[3, 36]
[3, 48024900]
[3, 1413721]
[3, 41616]
[4, 9801]
[4, 94109401]
[5, 1533776805]
[5, 40755]
[6, 121771]
[7, 297045]
[8, 631125]
[9, 1212751]
[10, 2158695]
[11, 3617601]
[12, 5773825]
[13, 8851275]
[14, 13117251]
[15, 18886285]
[16, 26523981]
[17, 36450855]
[18, 49146175]
[19, 65151801]
