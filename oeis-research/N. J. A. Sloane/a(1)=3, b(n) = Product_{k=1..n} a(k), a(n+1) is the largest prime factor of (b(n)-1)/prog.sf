#!/usr/bin/ruby

# a(1)=3, b(n) = Product_{k=1..n} a(k), a(n+1) is the largest prime factor of (b(n)-1).
# https://oeis.org/A005266

# Known terms:
#   3, 2, 5, 29, 79, 68729, 3739, 6221191, 157170297801581, 70724343608203457341903, 46316297682014731387158877659877, 78592684042614093322289223662773, 181891012640244955605725966274974474087, 547275580337664165337990140111772164867508038795347198579326533639132704344301831464707648235639448747816483406685904347568344407941

include('../../../factordb/auto.sf')

func a(n) is cached {

    return 3 if (n == 1)

    gpf(prod(1..^n, {|k| a(k) }) - 1)
}

for n in (1..20) {
    say "#{n} #{a(n)}"
}

__END__
1 3
2 2
3 5
4 29
5 79
6 68729
7 3739
8 6221191
9 157170297801581
10 70724343608203457341903
11 46316297682014731387158877659877
12 78592684042614093322289223662773
13 181891012640244955605725966274974474087
14 547275580337664165337990140111772164867508038795347198579326533639132704344301831464707648235639448747816483406685904347568344407941

not FF: 442576183027534795567991272922468902096371387765922447901871227112747284419440297295565770166933808645200108466735991235061090659400364706032149363883455615961030421103844439618299223858922381451156840140136257377121084705582137980362660123062887572536778919301723368989319597135183153671329
