#!/usr/bin/perl

# Numbers k such that the sums of the first k and k+2 primes are also prime.
# https://oeis.org/A309718

# The smallest run of 4 consecutive terms that differ by 2, is:
#    326 328 330 332

# Runs of 5 consecutive terms that differ by 2:
#   1195374 1195376 1195378 1195380 1195382
#   13573340 13573342 13573344 13573346 13573348
#   50244616 50244618 50244620 50244622 50244624
#   54208752 54208754 54208756 54208758 54208760
#   248433420 248433422 248433424 248433426 248433428
#   258600428 258600430 258600432 258600434 258600436
#   322369832 322369834 322369836 322369838 322369840
#   330369906 330369908 330369910 330369912 330369914

use 5.014;
use strict;
use warnings;
use ntheory qw(:all);

my $p   = 2;
my $p_1 = 3;

my $sum = 2;
my $k   = 1;

my @prev = ($k);

forprimes {

    if (is_prime($sum) and is_prime($sum + $p_1 + $_)) {

        #print($k, ", ");
        push @prev, $k;

        if (@prev >= 5) {
            shift @prev;

            if (vecall { $prev[$_ + 1] - $prev[$_] == 2 } 0 .. $#prev - 1) {
                say "Found: @prev";
            }
        }
    }

    $sum += $p_1;
    ++$k;
    ($p, $p_1) = ($p_1, $_);

} 5, 10000000000;

__END__

# Runs of 4 consecutive terms that differ by 2:
#    326 328 330 332
#    455278 455280 455282 455284
#    506164 506166 506168 506170
#    1064170 1064172 1064174 1064176
#    1195374 1195376 1195378 1195380
#    1195376 1195378 1195380 1195382
#    4220904 4220906 4220908 4220910
#    4627300 4627302 4627304 4627306
#    6627112 6627114 6627116 6627118
#    7119404 7119406 7119408 7119410
#    7211682 7211684 7211686 7211688
#    8892258 8892260 8892262 8892264
#    11289362 11289364 11289366 11289368
#    13573340 13573342 13573344 13573346
#    13573342 13573344 13573346 13573348
#    14044346 14044348 14044350 14044352
#    16280268 16280270 16280272 16280274
#    25153410 25153412 25153414 25153416
#    27905422 27905424 27905426 27905428
#    29677730 29677732 29677734 29677736
#    29833416 29833418 29833420 29833422
#    30824538 30824540 30824542 30824544
#    32358268 32358270 32358272 32358274
#    37681612 37681614 37681616 37681618
#    43799174 43799176 43799178 43799180
#    44141556 44141558 44141560 44141562
#    45489680 45489682 45489684 45489686
#    48683878 48683880 48683882 48683884
#    50244616 50244618 50244620 50244622
#    50244618 50244620 50244622 50244624
#    50587506 50587508 50587510 50587512
#    54208752 54208754 54208756 54208758
#    54208754 54208756 54208758 54208760
#    62466706 62466708 62466710 62466712
#    62891832 62891834 62891836 62891838
#    63420984 63420986 63420988 63420990
#    65945216 65945218 65945220 65945222
#    69695234 69695236 69695238 69695240
#    70413292 70413294 70413296 70413298
#    72664470 72664472 72664474 72664476
#    76959742 76959744 76959746 76959748
#    79122284 79122286 79122288 79122290
#    84735388 84735390 84735392 84735394
#    85780228 85780230 85780232 85780234
