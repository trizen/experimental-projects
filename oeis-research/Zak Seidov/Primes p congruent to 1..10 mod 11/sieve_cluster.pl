#!/usr/bin/perl

# Primes p such that, starting with p, 10 consecutive primes = {1,2,3,4,5,6,7,8,9,10} modulo 11.
# https://oeis.org/A338374

use 5.014;
use ntheory qw(:all);

use experimental qw(signatures);

# Also in the sequuence:
#   1562407603483, 2482030844173, 3021762188281, 3521525276413, 4660551540041, 4933735042897

sub isok ($p) {

    for (my $count = 1 ; $count <= 10 ; ++$count) {
        $p % 11 == $count or return;
        $p = next_prime($p);
    }

    return 1;
}

foreach my $p (
    23700022897, 60962211883, 92728531127, 197520193069, 359754461617, 498393445859, 628772434951, 715117260463, 1053978912361, 1113788109127, 1188162419291, 1562407603483, 2482030844173, 3021762188281, 3521525276413, 4660551540041, 4933735042897
  ) {
    isok($p) || die "error for $p";
}

my %seen;

foreach my $diff (

#[14, 54, 68, 108, 122, 188, 228, 242],

[12, 24, 36, 70, 82, 94, 106, 162, 196],
[34, 46, 58, 70, 126, 138, 150, 184, 240],
[12, 24, 102, 180, 192, 204, 282, 294, 306],
[12, 24, 58, 70, 82, 138, 150, 162, 174],
[12, 24, 36, 70, 82, 94, 150, 162, 174],
[12, 24, 102, 158, 170, 182, 194, 228, 240],
[78, 112, 168, 180, 192, 226, 238, 250, 306],
[34, 46, 58, 114, 126, 138, 216, 228, 240],
[12, 46, 58, 70, 148, 160, 172, 228, 240],
[12, 24, 36, 70, 82, 94, 106, 162, 196],
[56, 68, 80, 92, 126, 138, 150, 206, 240],
[34, 46, 58, 114, 126, 138, 150, 250, 306],


#~ [40, 54, 94, 160, 174, 214, 228, 234],
#~ [40, 54, 94, 108, 148, 214, 228, 234],
#~ [14, 54, 68, 134, 174, 240, 254, 260],
#~ [14, 54, 68, 108, 174, 188, 254, 266],
#~ [40, 54, 94, 108, 174, 214, 228, 328],
#~ [40, 54, 94, 108, 148, 162, 202, 240],
#~ [14, 54, 68, 108, 122, 188, 228, 284],
#~ [66, 80, 120, 134, 174, 188, 254, 260],

    #~ [40,  54,  94,  108, 148, 214, 228, 250],
    #~ [14,  54,  68,  108, 122, 162, 228, 330],
    #~ [14,  80,  120, 186, 200, 240, 254, 266],
    #~ [14,  54,  68,  108, 122, 240, 254, 258],
    #~ [40,  54,  94,  108, 148, 214, 228, 276],
    #~ [118, 132, 172, 186, 226, 292, 306, 340],
    #~ [40,  54,  94,  108, 148, 214, 228, 244],
    #~ [14,  54,  68,  186, 200, 240, 254, 276],
    #~ [14,  54,  68,  186, 200, 240, 306, 314],
    #~ [40,  54,  94,  160, 174, 214, 228, 234],

  ) {
    pop @$diff;
    next if $seen{join(' ', @$diff)}++;
    say ":: Testing with differences (@$diff)";
    foreach my $p (sieve_prime_cluster(1562407603483, 1e13, @$diff)) {
        say $p if isok($p);
    }
}


__END__

[5129602609, 40602028559, 69528307577, 129007460609, 236659873633, 322320688171, 371170549153, 390581208473, 441568239503, 651686524243].each{|p|
    say n_primes(8, p+1).map{ _ - p }
}

[40, 54, 94, 108, 148, 214, 228, 250]
[14, 54, 68, 108, 122, 162, 228, 330]
[14, 80, 120, 186, 200, 240, 254, 266]
[14, 54, 68, 108, 122, 240, 254, 258]
[40, 54, 94, 108, 148, 214, 228, 276]
[118, 132, 172, 186, 226, 292, 306, 340]
[40, 54, 94, 108, 148, 214, 228, 244]
[14, 54, 68, 186, 200, 240, 254, 276]
[14, 54, 68, 186, 200, 240, 306, 314]
[40, 54, 94, 160, 174, 214, 228, 234]
