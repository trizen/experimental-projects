#!/usr/bin/ruby

# Numbers k such that Sum_{j=1..k} d(j) is an integer where d(j) is the decimal fraction 0.2j (e.g., d(14) = 0.28).
# https://oeis.org/A054465

# Known terms:
#   4, 20, 349, 474, 3999, 4624, 5000, 35624, 390624, 499999, 1609375, 27109375, 40000000, 137109375, 149999999, 3000000000, 4787109375, 6787109375, 24999999999, 200000000000, 281787109375, 1581787109375, 3499999999999

# Formula due to Herman Jamke:
#   Solutions x to the modular quadratic equation: x^2 + x + c == 0 (mod 10^a) where c = ((8-18*a)*10^a + 10^(2*a))/40, such that ceiling(10^(a-1)/2) <= x <= (10^a/2)-1, a=1,2,...

60.of {|a|
    var c = ((8 - 18*a)*10**a + 10**(2*a))/40
    modular_quadratic_formula(1, 1, c, 10**a).grep {
        .is_between(ceil(10**(a-1) / 2), 10**a / 2 - 1)
    }
}.flat.sort.uniq.each_kv {|k,v|
    say "#{k+1} #{v}"
}

__END__
1 4
2 20
3 349
4 474
5 3999
6 4624
7 5000
8 35624
9 390624
10 499999
11 1609375
12 27109375
13 40000000
14 137109375
15 149999999
16 3000000000
17 4787109375
18 6787109375
19 24999999999
20 200000000000
21 281787109375
22 1581787109375
23 3499999999999
24 10000000000000
25 49918212890624
26 209918212890624
27 449999999999999
28 3740081787109375
29 38740081787109375
30 45000000000000000
31 99999999999999999
32 356259918212890624
33 3500000000000000000
34 3756259918212890624
35 12256259918212890624
36 19999999999999999999
37 250000000000000000000
38 357743740081787109375
39 2999999999999999999999
40 12392256259918212890624
41 15000000000000000000000
42 377392256259918212890624
43 399999999999999999999999
44 500000000000000000000000
45 4477392256259918212890624
46 30022607743740081787109375
47 49999999999999999999999999
48 169977392256259918212890624
49 2619977392256259918212890624
50 4000000000000000000000000000
51 14999999999999999999999999999
52 28380022607743740081787109375
53 193380022607743740081787109375
54 300000000000000000000000000000
55 1606619977392256259918212890624
56 2499999999999999999999999999999
57 15893380022607743740081787109375
58 20000000000000000000000000000000
59 145893380022607743740081787109375
60 349999999999999999999999999999999
61 1000000000000000000000000000000000
62 1995893380022607743740081787109375
63 44999999999999999999999999999999999
64 109004106619977392256259918212890624
65 3390995893380022607743740081787109375
66 4500000000000000000000000000000000000
67 6109004106619977392256259918212890624
68 9999999999999999999999999999999999999
69 350000000000000000000000000000000000000
70 1999999999999999999999999999999999999999
71 2896109004106619977392256259918212890624
72 25000000000000000000000000000000000000000
73 44103890995893380022607743740081787109375
74 299999999999999999999999999999999999999999
75 469103890995893380022607743740081787109375
76 1500000000000000000000000000000000000000000
77 3269103890995893380022607743740081787109375
78 36769103890995893380022607743740081787109375
79 39999999999999999999999999999999999999999999
80 50000000000000000000000000000000000000000000
81 126769103890995893380022607743740081787109375
82 1576769103890995893380022607743740081787109375
83 4999999999999999999999999999999999999999999999
84 21576769103890995893380022607743740081787109375
85 400000000000000000000000000000000000000000000000
86 1499999999999999999999999999999999999999999999999
87 3923423230896109004106619977392256259918212890624
88 27423423230896109004106619977392256259918212890624
89 30000000000000000000000000000000000000000000000000
90 249999999999999999999999999999999999999999999999999
91 307423423230896109004106619977392256259918212890624
92 1442576576769103890995893380022607743740081787109375
93 2000000000000000000000000000000000000000000000000000
94 14442576576769103890995893380022607743740081787109375
95 34999999999999999999999999999999999999999999999999999
96 99442576576769103890995893380022607743740081787109375
97 100000000000000000000000000000000000000000000000000000
98 500557423423230896109004106619977392256259918212890624
99 4499999999999999999999999999999999999999999999999999999
100 11000557423423230896109004106619977392256259918212890624
101 138999442576576769103890995893380022607743740081787109375
102 450000000000000000000000000000000000000000000000000000000
103 999999999999999999999999999999999999999999999999999999999
104 4811000557423423230896109004106619977392256259918212890624
105 21188999442576576769103890995893380022607743740081787109375
106 35000000000000000000000000000000000000000000000000000000000
