#!/usr/bin/ruby

# a(n) is obtained by applying the map k -> composite(k) n times, starting at n.
# https://oeis.org/A280327

func a(n) is cached {
    1..n -> reduce({ .composite }, n)
}

for n in (1..1000) {
    print(a(n), ", ")
    #say "a(#{n}) = #{a(n)}"
}

__END__

# First 200 terms:
4, 12, 25, 39, 60, 94, 133, 183, 236, 320, 415, 520, 640, 805, 1007, 1212, 1463, 1800, 2144, 2562, 3021, 3523, 4135, 4840, 5747, 6630, 7701, 9057, 10392, 11812, 13519, 15400, 17534, 19827, 22564, 25624, 29206, 32998, 37041, 41819, 46659, 53223, 59345, 66104, 73368, 81897, 91157, 100827, 112045, 123985, 137874, 153209, 169197, 187719, 207734, 228646, 253076, 277415, 304828, 338921, 371055, 405390, 443465, 483875, 530573, 580661, 632193, 687870, 751522, 818596, 891309, 972055, 1057417, 1151547, 1251732, 1365988, 1487830, 1613472, 1748332, 1900868, 2054167, 2225118, 2417231, 2626111, 2835385, 3056500, 3298825, 3553085, 3838949, 4135669, 4465628, 4801345, 5160323, 5566352, 5989790, 6443727, 6916790, 7448315, 8005880, 8614982, 9238754, 9916324, 10620387, 11442048, 12310639, 13196950, 14131597, 15117036, 16207233, 17352026, 18540431, 19853067, 21232828, 22746424, 24416771, 26073391, 27807863, 29690417, 31648950, 33830522, 36074373, 38546896, 41041503, 43685810, 46652384, 49718966, 52939772, 56337539, 59907668, 63885007, 67975460, 72267092, 77013367, 81833068, 87026385, 92381286, 98165786, 104589824, 111231508, 118203665, 125552452, 133240132, 141283292, 150111920, 159310059, 168787942, 179178384, 190019330, 201740494, 213615045, 226242003, 240432945, 254588367, 269299903, 285150774, 301524467, 319236535, 337814332, 357295524, 378604761, 399951542, 422424893, 446154473, 472443098, 499494181, 527706580, 557180396, 587995460, 620452638, 656359660, 693032183, 731246258, 772418403, 815109096, 859616728, 907252572, 956048387, 1008416894, 1063396502, 1122950153, 1182900013, 1248010652, 1316238095, 1387672129, 1461916232, 1539094829, 1623261063, 1710387572, 1799598418, 1896779231, 1995418016, 2100442407, 2211337558, 2327446499, 2447308839, 2573974036, 2713995438, 2853138333, 2998079382, 3151462818
